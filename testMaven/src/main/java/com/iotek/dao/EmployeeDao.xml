<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.iotek.dao.EmployeeDao">
    <insert id="addEmployee">
        insert into T_EMPLOYEE
        values (SEQ_EMPLOYEE.nextval,#{e_account},#{e_pass},#{e_name},#{e_gender},
                #{e_address},#{e_phone},#{e_debit},#{e_enroll_date},#{e_state},#{e_salary})
    </insert>
    <update id="updateEmployee">
        update T_EMPLOYEE
        <set>
            <if test="e_account!=null">
                e_account=#{e_account},
            </if>
            <if test="e_pass!=null">
                e_pass=#{e_pass},
            </if>
            <if test="e_name!=null">
                e_name=#{e_name},
            </if>
            <if test="e_gender!=null">
                e_gender=#{e_gender}
            </if>
            <if test="e_account!=null">
                e_account=#{e_account}
            </if>
            <if test="e_phone!=null">
                e_phone=#{e_phone}
            </if>
            <if test="e_debit!=null">
                e_debit=#{e_debit}
            </if>
            <if test="e_enroll_date!=null">
                e_enroll_date=#{e_enroll_date}
            </if>
            <if test="e_state!=null">
                e_state=#{e_state}
            </if>
            <if test="e_salary!=null">
                e_salary=#{e_salary}
            </if>
        </set>
        <where>
            <choose>
                <when test="e_id!=null and e_id!=0">
                    e_id=#{e_id}
                </when>
                <otherwise>
                    1=1
                </otherwise>
            </choose>
        </where>
    </update>
    <delete id="delEmployee">
        delete from T_EMPLOYEE where E_ID=#{0}
    </delete>
    <select id="getEmployee" resultType="com.iotek.model.Employee">
        select * from T_EMPLOYEE
        <where>
            <choose>
                <when test="e_account!=null and e_pass!=null">
                    e_account=#{e_account} and e_pass=#{e_pass}
                </when>
                <when test="e_name!=null and e_name!=''">
                    e_name=#{e_name}
                </when>
                <when test="e_id!=null and e_id!=0">
                    e_id=#{e_id}
                </when>
                <otherwise>
                    1=1
                </otherwise>
            </choose>
        </where>
    </select>
</mapper>